<!DOCTYPE html>
<html>
  <body>
    <input id="username" />
    <input id="comment" />
    <input type="submit" id="sb" />
    <div id="chat"></div>

    <script>
      const xml = new XMLHttpRequest();
      const submitButton = document.getElementById('sb');
      const chat = document.getElementById('chat');
      submitButton.onclick = () => {
        const username = document.getElementById('username').value;
        const comment = document.getElementById('comment').value;
        xml.open('GET', '/llip?username='+username+'&comment='+comment);
        xml.send();
      };
      const sendChat = () => {
        xml.open("GET", "/message.txt");
        xml.onreadystatechange = () => {
          if (xml.responseText) {
            chat.innerHTML = xml.responseText;
          }
        };
        xml.send();
      };
      window.setInterval(sendChat, 1000);
    </script>
  </body>
</html>
