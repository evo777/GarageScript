<!DOCTYPE html>
<html>
  <body>
    <input id="username" />
    <input id="comment" />
    <input type="submit" id="subButton"/>
    <pre id="chat"></pre>

    <script>
      const xml = new XMLHttpRequest();
      const submitButton = document.getElementById('subButton');
      submitButton.onclick = () => {
        const username = document.getElementById('username').value;
        const comment = document.getElementById('comment').value;
        xml.open('POST', '/llip');
        xml.setRequestHeader('Content-Type', 'application/json');
        xml.send(
          JSON.stringify({
            username: username,
            comment: comment
          })
        );
      };
     const sendMessage = () => {
       xml.open('GET', '/message.txt');
       xml.onreadystatechange = () => {
         if (xml.responseText) {
           const div = document.getElementById('chat');
           div.innerHTML = xml.responseText;
         }
       };
       xml.send();
     };
     window.setInterval(sendMessage, 1000);
    </script>
  </body>
</html>
